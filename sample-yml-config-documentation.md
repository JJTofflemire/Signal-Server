Sample.yml Config Documentation
=================

Dependancies
-----------------

- Required:

  - [AWS](#aws-iam-configuration)
  
  - [GCP](#gcp-configuration)

  - [Redis](#redis-notes)

- Optional, but won't function without configuration

  - Braintree

  - Datadog

  - Stripe

- [Here is an example of sample.yml with some shorthand comments](sample-with-added-comments.yml) (it probably won't be finisehd)

AWS IAM Configuration
-----------------

- Create an account with AWS

- Go to IAM and create a user with full access (this is definitely not entirely safe but hey, it gets the job done)
  
- Copy the access key and access secret, and paste them into `awsAttachments.accessKey` and `awsAttachments.accessSecret`, and `cdn.accessKey` and `cdn.accessSecret` in [sample-secrets-bundle](/service/config/sample-secrets-bundle.yml)
  
- If you give the IAM user full access, you can reuse the same access key and secret for both buckets

AWS Buckets Configuration
-----------------

- Go to S3 and create the two buckets below (I don't think you need to change any other settings)
  
  - aws-attachments
  
  - cdn
  
AWS DynamoDb Configuration
-----------------
  
- Sign into AWS, look up DynamoDb, and make tables of all of the following(not sure what to do about Partition Keys)

- If you change these names, also change them in [sample.yml](/service/config/sample.yml)
  
  - Accounts
  
  - Accounts_PhoneNumbers
  
  - Accounts_PhoneNumberIdentifiers
  
  - Accounts_Usernames
  
  - DeletedAccounts
  
  - DeletedAccountsLock
  
  - IssuedReceipts
  
    - expiration: P30D
  
    - generator: abcdefg12345678=
  
  - Keys
  
  - PQ_Keys
  
  - PQ_Last_Resort_Keys
  
  - Messages
  
    - expiration: P30D

  - PendingAccounts

  - PendingDevices

  - PhoneNumberIdentifiers
  
  - Profiles
  
  - PushChallenge
  
  - RedeemedReceipts
  
    - expiration: P30D
  
  - RegistrationRecovery
  
    - expiration: P30D
  
  - RemoteConfig
  
  - ReportMessage
  
  - Subscriptions
  
  - VerificationSessions

GCP Configuration
-----------------

- Create an account with Google Cloud - you can you a pre-existing Google account, but you will have to add a payment method in order to use Google Cloud

- Make a new project

- Create a new bucket (the option to should be a button somewhere within the created project)

- Set up an encrypted key for the bucket ----> Unfinished, and very unintuitive
  
  - Inside the bucket, select the Configuration tab and hit the edit icon next to the Encryption type
  
  - Select `Customer-managed encryption key (CMEK)`, and follow the link for `Google Cloud Key Management Service`
  
  - Hit `ENABLE`, refresh the tab, then hit `MANAGE`
  
  - 

Redis Notes
-----------------

- Currently the [docker-compose.yml](docker-compose.yml) file has a redis-cluster generated by ChatGPT, using `Localhost` and ports 7000-7002